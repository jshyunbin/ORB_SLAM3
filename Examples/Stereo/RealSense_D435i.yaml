%YAML:1.0

#--------------------------------------------------------------------------------------------
# Camera Parameters. Adjust them!
#--------------------------------------------------------------------------------------------
File.version: "1.0"

# [중요] D435i는 내부적으로 Rectified지만, ORB-SLAM3에서 안정적으로 돌리려면
# "PinHole"로 설정하고 왜곡 계수를 0으로 주는 것이 가장 확실합니다.
Camera.type: "PinHole"

# [Camera 1] Left IR Camera (로그 값 적용)
Camera1.fx: 383.827
Camera1.fy: 383.827
Camera1.cx: 312.818
Camera1.cy: 235.888

# D435i IR 이미지는 보정되어 나오므로 왜곡 계수는 0
Camera1.k1: 0.0
Camera1.k2: 0.0
Camera1.p1: 0.0
Camera1.p2: 0.0

# [Camera 2] Right IR Camera (Left와 동일하게 설정)
# 이 부분이 없어서 Segfault가 났던 것입니다.
Camera2.fx: 383.827
Camera2.fy: 383.827
Camera2.cx: 312.818
Camera2.cy: 235.888

Camera2.k1: 0.0
Camera2.k2: 0.0
Camera2.p1: 0.0
Camera2.p2: 0.0

# Camera resolution
Camera.width: 640
Camera.height: 480

# Camera frames per second 
Camera.fps: 30

# Color order (IR은 흑백이지만 포맷 맞춤을 위해 1)
Camera.RGB: 1

#--------------------------------------------------------------------------------------------
# Stereo Rectification. Only if you need to pre-rectify the images.
# Camera.type: "PinHole" means that ORB-SLAM3 computes the rectification maps.
#--------------------------------------------------------------------------------------------
# [중요] Left to Right Camera Transform (Tlr)
# 이 행렬이 없으면 Stereo 초기화가 불가능해 죽습니다.
Stereo.T_c1_c2: !!opencv-matrix
   rows: 4
   cols: 4
   dt: f
   data: [1.0, 0.0, 0.0, 0.0501551,
          0.0, 1.0, 0.0, 0.0,
          0.0, 0.0, 1.0, 0.0,
          0.0, 0.0, 0.0, 1.0]

#--------------------------------------------------------------------------------------------
# Stereo Baseline
#--------------------------------------------------------------------------------------------
# [수정] Stereo.b는 단순히 거리(m)가 아니라 "Baseline(m) * fx" 입니다.
# 계산: 0.0501551 * 383.827 = 19.251
# Stereo.b: 19.251

# Depth Threshold (Baseline의 약 40배)
Stereo.ThDepth: 40.0


#--------------------------------------------------------------------------------------------
# ORB Parameters
#--------------------------------------------------------------------------------------------
# ORB Extractor: Number of features per image
ORBextractor.nFeatures: 1250

# ORB Extractor: Scale factor between levels in the scale pyramid    
ORBextractor.scaleFactor: 1.2

# ORB Extractor: Number of levels in the scale pyramid   
ORBextractor.nLevels: 8

# ORB Extractor: Fast threshold
ORBextractor.iniThFAST: 20
ORBextractor.minThFAST: 7

#--------------------------------------------------------------------------------------------
# Viewer Parameters
#--------------------------------------------------------------------------------------------
Viewer.KeyFrameSize: 0.05
Viewer.KeyFrameLineWidth: 1.0
Viewer.GraphLineWidth: 0.9
Viewer.PointSize: 2.0
Viewer.CameraSize: 0.08
Viewer.CameraLineWidth: 3.0
Viewer.ViewpointX: 0.0
Viewer.ViewpointY: -0.7
Viewer.ViewpointZ: -3.5
Viewer.ViewpointF: 500.0